(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e6f61aa6"],{"47fd":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"create-project"},[e.isMobile?n("div",{staticClass:"nav-link-container"},[n("router-link",{staticClass:"nav-link",attrs:{to:{name:"portal"}}},[e._v("Главная")]),n("h1",{staticClass:"create-project__title"},[e._v("Подача заявки на проектную инициативу")]),n("div",{staticClass:"divider"})],1):e._e(),e.isMobile?e._e():n("h1",[e._v("Подача заявки на проектную инициативу")]),n("div",{staticClass:"shadow"},[n("div",{staticClass:"name-controls"},[n("div",{staticClass:"name"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],staticClass:"title",attrs:{type:"text",placeholder:"Планируемое название проекта"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}})]),e.isMobile?e._e():n("div",{staticClass:"controls"},[n("div",{staticClass:"btn red",on:{click:e.sendForm}},[e._v("Отправить")])])]),e.isMobile?e._e():n("div",{staticClass:"tabs"},[e._l(e.fields,(function(t,r){return n("div",{key:r,staticClass:"tab",class:{active:r==e.activeField},on:{click:function(t){return e.$emit("change-field",r)}}},[e._v(e._s(t.title)+"\n            ")])})),n("div",{staticClass:"tab stub"})],2),n(e.fields[e.activeField].component,{tag:"component",model:{value:e.form[e.fields[e.activeField].model],callback:function(t){e.$set(e.form,e.fields[e.activeField].model,t)},expression:"form[fields[activeField].model]"}})],1),e.isMobile?n("div",{staticClass:"buttons-container"},[n("div",{staticClass:"submit-button",on:{click:e.sendForm}},[e._v("Отправить")])]):e._e()])},i=[],o=(n("8e6e"),n("ac6a"),n("456d"),n("96cf"),n("3b8d")),a=(n("c5f6"),n("bd86")),s=(n("7f7f"),n("a32c")),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tab-field"},[e.isMobile?e._e():n("h2",[e._v("Информация о проекте")]),[n("div",{staticClass:"selects"},[n("div",{staticClass:"th-areas"},[n("MultiSelect",{staticClass:"multi-select",attrs:{label:"Тематические направления",items:e.thematic_areas},model:{value:e.common.thematic_areas,callback:function(t){e.$set(e.common,"thematic_areas",t)},expression:"common.thematic_areas"}})],1),n("div",{staticClass:"type-select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.common.project_type,expression:"common.project_type"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.common,"project_type",t.target.multiple?n:n[0])}}},[n("option",{attrs:{disabled:""},domProps:{value:null}},[e._v("Тип проекта")]),e._l(e.project_types,(function(t,r){return n("option",{key:r,domProps:{value:t.id}},[e._v(e._s(t.title))])}))],2)])]),n("div",{staticClass:"text-areas"},[n("div",{staticClass:"area"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.common.target,expression:"common.target"}],attrs:{placeholder:"Цель"},domProps:{value:e.common.target},on:{input:function(t){t.target.composing||e.$set(e.common,"target",t.target.value)}}})]),n("div",{staticClass:"area middle"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.common.description,expression:"common.description"}],attrs:{placeholder:"Описание проекта"},domProps:{value:e.common.description},on:{input:function(t){t.target.composing||e.$set(e.common,"description",t.target.value)}}})]),n("div",{staticClass:"area"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.common.actuality,expression:"common.actuality"}],attrs:{placeholder:"Актуальность проекта"},domProps:{value:e.common.actuality},on:{input:function(t){t.target.composing||e.$set(e.common,"actuality",t.target.value)}}})])]),n("div",{staticClass:"files"},[n("div",{staticClass:"files__passport"},[n("ModelFile",{staticClass:"file-input",attrs:{label:"Паспорт проекта"},model:{value:e.passportFile,callback:function(t){e.passportFile=t},expression:"passportFile"}}),n("a",{staticClass:"dlfile",attrs:{href:e.dlUrl,download:""}},[e._v("Скачать форму паспорта проекта")])],1),n("div",{staticClass:"files__docs"},[n("ModelFile",{staticClass:"file-input",attrs:{label:"Добавить файлы",multiple:""},model:{value:e.common.files,callback:function(t){e.$set(e.common,"files",t)},expression:"common.files"}})],1)])]],2)},l=[],u=(n("28a5"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"multi-select",on:{mouseenter:e.mouseenter,mouseleave:e.mouseleave}},[n("div",{staticClass:"basis",on:{click:function(t){e.isOpen=!e.isOpen}}},[e.innerModel.length?n("header",[e._v(e._s(e.label))]):e._e(),n("main",[n("div",{staticClass:"text"},[e.innerModel.length?[e._v(e._s(e.enumerate))]:[e._v(e._s(e.label))]],2),n("div",{staticClass:"button",class:{flipped:e.isOpen}})])]),e.isOpen?n("div",{staticClass:"options"},e._l(e.items,(function(t){return n("div",{key:t.id,staticClass:"option"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.innerModel,expression:"innerModel"}],attrs:{type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.innerModel)?e._i(e.innerModel,t.id)>-1:e.innerModel},on:{change:function(n){var r=e.innerModel,i=n.target,o=!!i.checked;if(Array.isArray(r)){var a=t.id,s=e._i(r,a);i.checked?s<0&&(e.innerModel=r.concat([a])):s>-1&&(e.innerModel=r.slice(0,s).concat(r.slice(s+1)))}else e.innerModel=o}}}),e._v(e._s(t.title))])])})),0):e._e()])}),d=[],p=(n("7514"),{name:"MultiSelect",data:function(){return{isOpen:!1,timerToClose:null,innerModel:[]}},props:{label:String,items:Array,outerModel:Array},computed:{enumerate:function(){var e=this,t=[],n=function(n){return t.push(e.items.find((function(e){return e.id==n})).title)};return this.innerModel.forEach(n),t.join(", ")}},methods:{mouseenter:function(){clearTimeout(this.timerToClose)},mouseleave:function(){var e=this,t=function(){return e.isOpen=!1};this.timerToClose=setTimeout(t,1e3)}},model:{prop:"outerModel",event:"change"},watch:{innerModel:function(e){this.$emit("change",e)},outerModel:function(e){this.innerModel=e}},mounted:function(){this.innerModel=this.outerModel}}),m=p,f=(n("d149"),n("2877")),v=Object(f["a"])(m,u,d,!1,null,"19345e74",null),b=v.exports,h=n("2f62"),g=n("8a32");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=["project_types","thematic_areas","isMobile"],j=["loadContestsConfig"],w={name:"Common",props:{common:Object},data:function(){return{new_file:null,dlUrl:"http://s3-cms.rsv.ru/pasport_proyektnoi_initsiativy.docx"}},mounted:function(){this.common.files||this.$set(this.common,"files",[])},filters:{file_name:function(e,t){if(e.length<=t)return e;var n=e.split("."),r="";return n.length>1&&(r=".".concat(n.pop())),e=n.join("."),e=e.slice(0,t-r.length),"".concat(e,"...").concat(r)}},computed:_({},Object(h["c"])(O),{isReady:function(){return this.project_types.length&&this.thematic_areas.length},passportFile:{get:function(){return this.common.passport_file?{url:this.common.passport_file}:null},set:function(e){this.$set(this.common,"passport_file",e?e.url:null)}}}),watch:{new_file:function(e){e&&(this.common.files.push(e),this.new_file=null)}},methods:_({},Object(h["b"])(j)),model:{prop:"common",event:"change"},components:{ModelFile:g["a"],MultiSelect:b},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loadContestsConfig();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},C=w,k=(n("5bbf"),Object(f["a"])(C,c,l,!1,null,"893dd430",null)),x=k.exports;function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $=["isMobile"],F=["showPopup"],A=function(e){return{name:e.name,project_type:e.common.project_type,target:e.common.target,thematic_direction:e.common.thematic_areas,actuality:e.common.actuality,description:e.common.description,passport_file:e.common.passport_file||"",files:e.common.files.map((function(e){return e.url}))}},S={name:"WideCreateProject",data:function(){return{success:{success:!0,title:"Заявка отправлена!",text:"И будет обработана в ближайшее время",button:"Понятно",color:"#3874E0"},error:{title:"Произошла ошибка!",text:"Заполните поля",button:"Понятно",color:"#D1004A"}}},computed:M({},Object(h["c"])($)),props:{fields:Array,activeField:Number,form:Object},methods:M({},Object(h["b"])(F),{sendForm:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=A(this.form),e.next=3,Object(s["f"])("projects","iniative/create",t,!0);case 3:n=e.sent,n&&this.$emit("clear-form"),this.showPopup(n?this.success:this.error);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}),model:{prop:"form",event:"change"},components:{Common:x}},D=S,E=(n("f748"),n("6032"),Object(f["a"])(D,r,i,!1,null,"d615b4ea",null));t["default"]=E.exports},5468:function(e,t,n){},"5bbf":function(e,t,n){"use strict";var r=n("e5cd"),i=n.n(r);i.a},6032:function(e,t,n){"use strict";var r=n("dbbe"),i=n.n(r);i.a},"8a32":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"data-model-wrapper"},[n("div",{staticClass:"data-model",class:{uploading:e.uploading,filled:e.value},on:{click:e.onClick}},[n("input",{ref:"file",attrs:{hidden:"",type:"file",multiple:""},on:{change:e.onChange}}),e.coins?n("div",{staticClass:"coins"},[e._v(e._s(e.coins))]):e._e(),e.label?n("div",{staticClass:"label",class:{"hold-place":!e.value}},[e._v(e._s(e.label)),e.required?n("span",{staticClass:"required"},[e._v("  *")]):e._e()]):e._e()]),e.multiple&&Array.isArray(e.value)?e._l(e.value,(function(t,r){return n("div",{key:t.id,staticClass:"doc"},[n("span",{staticClass:"close",on:{click:function(t){return e.remove(r)}}}),e._v("\n            Файл загружен \n            "),n("span",{on:{click:function(t){return t.stopPropagation(),e.download(r)}}},[e._v("(скачать)")])])})):e.value?n("div",{staticClass:"doc"},[n("span",{staticClass:"close",on:{click:e.remove}}),e._v("\n        Файл загружен \n        "),n("span",{on:{click:e.download}},[e._v("(скачать)")])]):e._e()],2)},i=[],o=(n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("8e6e"),n("ac6a"),n("456d"),n("75fc")),a=(n("96cf"),n("3b8d")),s=n("bd86"),c=(n("c5f6"),n("a32c")),l=n("2f62");function u(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=d(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function d(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=["showPopup"],b={name:"ModelFile",props:{coins:Number,label:String,value:[Object,Array],multiple:Boolean,required:{type:Boolean,default:!1}},data:function(){return{uploading:!1,error:{success:!1,title:"Файл не загружен!",text:"Недопустимые расширение или размер файла",button:"Понятно",color:"#D1004A"}}},mounted:function(){},model:{prop:"value",event:"change"},methods:f({},Object(l["b"])(v),{onClick:function(){this.$refs.file.click()},onChange:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=u(this.$refs.file.files),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=18;break}return r=n.value,this.uploading=!0,e.next=8,Object(c["f"])("profile","file/upload",{file:r,isPublic:!1});case 8:if(i=e.sent,i){e.next=12;break}return this.uploading=!1,e.abrupt("return",this.showPopup(this.error));case 12:return e.next=14,Object(c["f"])("profile","file/bind",{fileId:i.file.id,group_id:null,is_favorite:!1,name:"doc".concat(i.file.id,".jpg")},!0);case 14:a=e.sent,a&&a.userFile?this.multiple?(s=Array.isArray(this.value)?[].concat(Object(o["a"])(this.value),[{id:a.userFile.id,url:i.file.url}]):[{id:a.userFile.id,url:i.file.url}],this.$emit("change",s)):this.$emit("change",{id:a.userFile.id,url:i.file.url}):console.error("File binding error");case 16:e.next=3;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](1),t.e(e.t0);case 23:return e.prev=23,t.f(),e.finish(23);case 26:this.uploading=!1,this.$refs.file.value="";case 28:case"end":return e.stop()}}),e,this,[[1,20,23,26]])})));function t(){return e.apply(this,arguments)}return t}(),download:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,o,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:null,n=this.multiple?this.value[t]:this.value,n){e.next=4;break}return e.abrupt("return");case 4:if(r=n.url,r){e.next=10;break}return e.next=8,Object(c["b"])("profile","file/".concat(n.id));case 8:i=e.sent,r=i.url;case 10:r&&(o=window.open(r,"_blank"),o.focus());case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),remove:function(e){if(this.multiple){var t=Object(o["a"])(this.value);t.splice(e,1),this.$emit("change",t)}else this.$emit("change",null)}})},h=b,g=(n("d35e"),n("2877")),y=Object(g["a"])(h,r,i,!1,null,"6a3e1e15",null);t["a"]=y.exports},"957a":function(e,t,n){},d149:function(e,t,n){"use strict";var r=n("d6b1"),i=n.n(r);i.a},d35e:function(e,t,n){"use strict";var r=n("957a"),i=n.n(r);i.a},d6b1:function(e,t,n){},dbbe:function(e,t,n){},e5cd:function(e,t,n){},f748:function(e,t,n){"use strict";var r=n("5468"),i=n.n(r);i.a}}]);
//# sourceMappingURL=chunk-e6f61aa6.bac9f81e.js.map